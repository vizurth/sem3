cmake_minimum_required(VERSION 3.10)
project(DynamicWidgetCollection VERSION 1.0 LANGUAGES CXX)

# Включаем автоматическую обработку moc/uic/rcc
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTORCC ON)

# Стандарт C++
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Указываем путь к Qt, если CMake его не находит сам
# (если Qt установлен вручную, например в /Users/username/Qt)

# Находим нужные модули Qt
find_package(Qt6 REQUIRED COMPONENTS Widgets)
set(CMAKE_PREFIX_PATH "/opt/homebrew/Cellar/qt/6.9.2/lib/cmake")
# Источники проекта
set(SOURCE_FILES
    src/main.cpp
    src/mainwindow.cpp
)

set(HEADER_FILES
    src/headers/mainwindow.h
)

# Создаём исполняемый файл
add_executable(${PROJECT_NAME} ${SOURCE_FILES} ${HEADER_FILES})

# Линкуем с Qt
target_link_libraries(${PROJECT_NAME} PRIVATE Qt6::Widgets)

# Для macOS: делаем нормальный .app bundle (чтобы всё собиралось корректно)
set_target_properties(${PROJECT_NAME} PROPERTIES
    MACOSX_BUNDLE TRUE
)
